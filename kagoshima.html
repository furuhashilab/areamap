<html>
<head>
<meta charset="utf-8"/>
<title>鹿児島カラム地図 - Kagoshima TabularMaps</title>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black"/>
<link rel="apple-touch-icon" href="fukui.png"/>
<meta property="og:image" content="fukui.png">
<meta name="format-detection" content="telephone=no"/>
<script>'use strict'

const TABULARMAP_SRC =     `
  伊佐市	曽於市 
長島町	出水市	指宿市	湧水町	大崎町	曽於市
阿久根市	さつま町	南九州市	霧島市	鹿屋市	志布志市
薩摩川内市	鹿児島市	枕崎市	姶良氏	錦江町	東串良町
いちき串木野市	南さつま市	十島村	垂水市	南大隅町	肝付町
日置市	三島村	屋久島町	西之表市	南種子町	中種子町
宇検村	大和村	喜界町	龍郷町	知名町	徳之島町
瀬戸内町	和泊町	伊仙町	奄美市	与論町	天城町
`

window.onload = function() {
	tmap.innerHTML = makeTabularMap(TABULARMAP_SRC)

	tmtitle.textContent = "鹿児島県"

//	document.getElementById("鯖江市").style.backgroundColor = "#ebb"
	linkCells(tmap)
}

const linkCells = function(divid) {
	for (let tr of divid.childNodes[0].childNodes[0].childNodes) {
		for (let td of tr.childNodes) {
			const name = td.textContent
			if (name.length > 0) {
				const url = "https://ja.wikipedia.org/wiki/" + encodeURIComponent(name)
				td.innerHTML = "<a href=" + url + ">" + name + "</a>"
			}
		}
	}
}
const makeTabularMap = function(src) {
	let items = []
	const ssrc = src.substring(1).split('\n')
	for (let ss of ssrc) {
		items.push(ss.split('\t'))
	}
	let s = []
	let maxcol = 0
	let nmaxcol = -1
	s.push('<table class=tabularmaps>')
	for (let row of items) {
		s.push('<tr>')
		for (let item of row) {
			if (item.length == 0) {
				let s2 = s[s.length - 1]
				if (s2.startsWith("<td class=tmnull colspan=")) {
					s.pop()
					const ncol = parseInt(s2.substring("<td class=tmnull colspan=".length)) + 1
					s.push('<td class=tmnull colspan=' + ncol + '</td>')
					if (maxcol < ncol) {
						maxcol = ncol
						nmaxcol = s.length - 1
					}
				} else {
					s.push('<td class=tmnull colspan=6></td>')
					if (maxcol < 1) {
						maxcol = 1
						nmaxcol = s.length - 1
					}
				}
			} else {
				s.push('<td id="' + item + '">' + item + '</td>')
			}
		}
		s.push('</tr>')
	}
	s[nmaxcol] = s[nmaxcol].replace('<td class=tmnull colspan=', '<td class=tmnull id=tmtitle colspan=')
	s.push('</table>')
	return s.join('')
}
</script>
<style>
body {
	font-family: sans-serif;
	text-align: center;
}
h1 {
	font-size: 3vw;
	margin-top: 2vw;
}
/* tabularmaps */
.tabularmaps {
	border-spacing: 1vw;
	border-collapse: separate;
	display: inline-block;
	width: 90vw;
	height: 67vw;
	position: relative;
}
.tabularmaps td {
	width: calc(90vw / 4);
	height: calc(60vw / 5);
	font-size: 3vw;
	vertical-align: middle;
	text-align: center;
	border-radius: .5vw;
	border: 1px solid #333;
	margin: 20px;
}
.tabularmaps a {
	text-decoration: none;
	color: black;
}
.tabularmaps a:visited {
	text-decoration: none;
	color: #055;
}
.tmnull {
	background-color: #888;
}
#tmtitle {
	color: white;
}
/* credit */
.credit {
	margin: 160px;
	text-align: center;
	font-size: 80%;
}
.credit a {
	color: gray !important;
}
</style>
</head>
<body>

<h1>鹿児島カラム地図</h1>

<div id="tmap"></div>

<div class="credit">
APP: CC BY <a href=http://fukuno.jig.jp/2462>福野泰介 - まるでパズルなカラム地図</a><br>
Base APP: CC BY <a href=https://fukuno.jig.jp/2433>福野泰介 - 日本のオープンデータ都市率ダッシュボード</a><br>
DATA: <a href=https://github.com/tabularmaps/77>地方測量部担当地域</a>, <a href=https://ja.wikipedia.org/wiki/%E6%97%A5%E6%9C%AC%E3%81%AE%E5%9C%B0%E5%9F%9F>八地方区分 - Wikipedia</a><br>
LAYOUT: CC0 <a href=https://hackmd.io/7m2A33zJSWq6DA9lYbvtpQ>カラム地図</a> (<a href=https://github.com/tabularmaps/hq>カラム地図 / TabularMaps on Github</a>)<br>
</div>

</body>
</html>
